/**
 *	FireWorks JS
 *	Description: Generates firework effect on a given canvas with random colors.
 *	Author: RITESH KUKREJA
 *	Website: http://riteshkukreja.wordpress.com
 *	Github: https://github.com/riteshkukreja
 */
var FireWorks=function(t){var i;t.canvas?i=t.canvas:(i=document.createElement("canvas"),document.body.appendChild(i));var n=i.getContext("2d"),s=t.width||window.innerWidth,e=t.height||window.innerHeight,o=function(t,i){return Math.random()*(i-t)+t},h=function(t){n&&(n.fillStyle=t,n.fillRect(0,0,i.width,i.height))},a=function(t,n){i&&(i.width=t,i.height=n)},r=function(){return"rgb("+Math.floor(o(0,255))+","+Math.floor(o(0,255))+","+Math.floor(o(0,255))+")"},p=function(t,i){this.x=t,this.y=i;var n=this;this.add=function(t){n.x+=t.x,n.y+=t.y},this.subtract=function(t){n.x-=t.x,n.y-=t.y},this.mult=function(t){n.x*=t,n.y*=t},this.clone=function(){return new p(n.x,n.y)}},c=function(t,i,n,s,e,o){this.position=t.clone(),this.color=i,this.size=s||3,this.velocity=new p(0,0),this.acceleration=n.clone(),this.damping=.9,this.done=!1,this.popped=o,this.popSpan=20;var h=5;e&&(this.damping*=this.size/h);var a=this;this.update=function(t){a.done||(a.velocity.add(a.acceleration),a.velocity.mult(a.damping),!a.popped&&a.velocity.y<=0?a.done=!0:a.popped&&(a.popSpan--,a.popSpan<=0&&(a.done=!0)),a.position.subtract(a.velocity),a.acceleration.subtract(t))},this.draw=function(t){!a.done&&t&&(t.fillStyle=a.color,t.beginPath(),t.arc(a.position.x,a.position.y,a.size,0,2*Math.PI),t.fill())}},l=function(t){this.popped=!1,this.done=!1,this.gravity=new p(0,.05),this.stars=[],this.color=r(),this.parallax=t,this.particle=new c(new p(o(0,i.width),i.height),this.color,new p(o(-.5,.5),o(1,3)),o(1,5),this.parallax),this.update=function(){if(!this.done)if(this.popped)if(0===this.stars.length)this.done=!0,this.gravity.mult(.1);else for(var t=this.stars.length-1;t>=0;t--)this.stars[t].update(this.gravity),this.stars[t].done&&this.stars.splice(t,1);else if(this.particle.update(this.gravity),this.particle.done){this.popped=!0;for(var i=o(1,100),t=0;i>t;t++)this.stars.push(new c(this.particle.position,this.color,new p(o(-2,2),o(-1,2)),1,!1,!0))}},this.draw=function(t){if(!this.done)if(this.popped)for(var i=this.stars.length-1;i>=0;i--)this.stars[i].draw(t);else this.particle.draw(t)}},d=function(){a(s,e);var t=[],i=function(){h("rgba(0, 0, 0, .3)"),o(0,1)<o(.1,.5)&&t.push(new l);for(var s=t.length-1;s>=0;s--)t[s].update(),t[s].draw(n),t[s].done&&t.splice(s,1);setTimeout(i,1e3/30)};i()};d()};